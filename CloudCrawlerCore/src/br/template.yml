!test
beginHour: 21
beginMinute: 30
interval: 5000
round: 3
className: br.mia.unifor.olio.artifact.OlioTest

#Os provedores de nuvem utilizados
providers:
 - &dummyProvider !provider
    name: dummy
    credentialPath: /br/dummy.properties
    
 - &ec2 !provider
    name: aws-ec2
    credentialPath: /br/AwsCredentials.properties
    
 - &rackspace !provider
    name: cloudservers-us
    credentialPath: /br/RackspaceCredentials.properties
    
#tipos de instância oferecidas pelo provedores de nuvem
instanceTypes:
 - &rackspace_low !instanceType
    providerProfile: 1 #Quando especificado pelo provedor
    provider: *rackspace
     
 - &c1_xlarge !instanceType
    providerProfile: c1.xlarge
    provider: *ec2
    
    
 - &c1_medium !instanceType
    providerProfile: c1.medium
    provider: *ec2
    
 - &m1_large !instanceType
    providerProfile: m1.large
    provider: *ec2
    
 - &m1_xlarge !instanceType
    providerProfile: m1.xlarge
    provider: *ec2
    
 - &dummy !instanceType
    cpu: 6
    ram: 9056    
    provider: *dummyProvider
    
metrics: 
 - &responseTime !metric
    probe: nomedaclasse
    sla: 50, 90
    
 - &messagesPerSecond !metric
    probe: nomedaclasse
    sla: 80

scriptlets:
 - &startup !scriptlet
   id: 1
   scripts:     
     - /home/ubuntu/startup.sh
 - &nginxScript !scriptlet
      id: 2
      scripts:
        - /home/ubuntu/editNginx.sh ${type.properties(thinServers)}
        - sudo sed -i 's/worker_processes.*$/worker_processes ${type.properties(workers)}; /' /etc/nginx/nginx.conf  
 - &railsScript !scriptlet
    id: 3
    scripts:
      - "sudo sed -i 's/host.*$/host: ${applianceScope.database.privateIpAddress} /' /var/app/olio/config/database.yml"   
       
    
applications:
 - &nginxApp !application
   id: 1
   config: 
    - *nginxScript
 - &mysqlApp !application
   id: 2
   onStartup: 
    - *startup
 - &fabanApp !application
   id: 3
   onStartup: 
    - *startup
 - &tomcatApp !application
   id: 4
   onStartup: 
    - *startup
 - &railsApp !application
   id: 5
   config: 
    - *railsScript
